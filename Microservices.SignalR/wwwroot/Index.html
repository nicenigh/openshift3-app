<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="js/signalr.js"></script>
</head>
<body>
    <input type="text" id="txtmsg" /><input type="button" value="submit" id="btnmsg" />
    <div id="msgs"></div>

    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/signalr")
            .build();

        connection.on("receive", function (message) {
            document.getElementById("msgs").innerHTML = document.getElementById("msgs").innerHTML + "<p>" + message + "</p>";
            console.log(message);
        });

        connection.start().catch(err => console.error(err.toString()));

        document.getElementById("btnmsg").addEventListener("click", function (event) {
            var txt = document.getElementById("txtmsg").value;
            connection.invoke("send", txt).catch(function (err) {
                return console.error(err.toString());
            });
        });
    </script>
</body>
</html>